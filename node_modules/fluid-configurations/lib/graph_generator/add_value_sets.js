/**
 * Value set vertices and edges are only used for
 * informational purposes and might be removed from the production graph
 */
var _ = require("lodash");

function addValueSets(options) {
  var config = options.config,
    getIdAsInt = options.utils.getIdAsInt;

  _.each(config.valueSets || {}, function (values, id) {
    id = getIdAsInt(id);

    options.graph.vertices.push({
      id: id,
      ns: "vs"
    });

    _.each(values, function (avId) {
      avId = getIdAsInt(avId);

      options.graph.edges.push({
        from: "vs:" + id,
        to: "av:" + avId,
        type: "hasGroup"
      });
    });
  });
}

module.exports = function (options) {
  addValueSets(options);
  return options;
};
