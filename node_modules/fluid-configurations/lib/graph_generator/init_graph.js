/**
 * Initializes the graph object
 */

module.exports = function (options) {

  if (!options.config) {
    throw new Error("Missing options.config");
  }

  // We don't want to mutate the original config so we will generate
  // a copy
  options.config = JSON.parse(JSON.stringify(options.config));

  options.graph = {
    vertices: [],
    edges: []
  };

  // All unlinked relationships should be shared via
  // the relationships option in the following format
  //
  //    { "ca:123": {type: [rawObject1, rawObject2] ] }
  //
  // They will be then processed by a specific task
  // We should keep individual steps as focused as possible
  // doing only one thing at a time
  options.graph.relationships = {};

  return options;
};
