/**
 * Gets localization files for a product
 *
 * Example:
 *    var params = {
 *      "environment": "prod",
 *      "customerId": 1475,
 *      "workflow": "prod",
 *      "productId": 20382
 *    };
 *    getProductLocalization(params, function (err, locales) {
 *      if (err) {
 *        return console.log(err, err.stack);
 *      }
 *      console.log(JSON.stringify(locales, null, 2));
 *    });
 *
 * Outputs:
 *
 *     [
 *        {
 *          "Key": "prod/prod/customers/c1475/configureHtml/products/p_20382/Fi18n_configure_product_deDE_jsonp.js",
 *          "LastModified": "2014-02-18T17:55:28.000Z",
 *          "ETag": "9318043f6feca4220cbd06f7051b461e",
 *          "Size": 8907,
 *          "locale": "deDE",
 *          "environment": "prod",
 *          "customerId": 1475,
 *          "workflow": "prod",
 *          "productId": 20382,
 *          "type": "productLocalization"
 *        }
 *     ]
 */


var listLocalizedObjects = require("../s3").listLocalizedObjects,
  _ = require("lodash"),
  default_options = {
    type: "productLocalization"
  };

module.exports = function (options, callback) {
  listLocalizedObjects(
    _.defaults({}, options, default_options),
    {
      Prefix: options.environment + "/" +
        options.workflow +
        "/customers/c" + options.customerId +
        "/configureHtml/products/p_" + options.productId +
        "/Fi18n_configure_product_"
    },
    callback
  );
};
