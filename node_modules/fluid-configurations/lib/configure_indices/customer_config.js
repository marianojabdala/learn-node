/**
 * Gets the index information for a customer configuration file on S3 given
 * the following parameters
 *
 * - environment
 * - workflow
 * - customerId
 *
 * Example:
 *
 *    getCustomerConfig({
 *      environment: "prod",
 *      customerId: 1475,
 *      workflow: "prod",
 *      catalogId: 7
 *    }, function (err, catalog) {
 *      if (err) {
 *        return console.log(err, err.stack, catalog);
 *      }
 *      console.log(JSON.stringify(catalog, null, 2));
 *    });
 *
 * Outputs:
 *
 */
var getPublishedFileInformation = require("../s3").getPublishedFileInformation,
  _ = require("lodash"),
  default_options = {
    type: "customerConfig"
  };

module.exports = function (options, callback) {
  getPublishedFileInformation(
    _.defaults({}, options, default_options), {
      Key: options.environment +
        "/" + options.workflow +
        "/customers/c" + options.customerId +
        "/configureHtml/configureHtmlData.js"
    },
    callback
  );
};
