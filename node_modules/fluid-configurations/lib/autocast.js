// Based on https://github.com/bahamas10/node-autocast

/**
 * Common strings to cast
 */
var common_strings = {
  "true": true,
  "false": false,
  "undefined": undefined,
  "null": null,
  "NaN": NaN
};

/**
 * Given a value, try and cast it
 */
function autocast(s) {
  var key;

  // Don't cast Date objects or empty Arrays (or they'll be casted as 0)
  if (s instanceof Date || (s instanceof Array && s.length === 0)) {
    return s;
  }

  // Don't cast booleans
  if (s === true || s === false) {
    return s;
  }

  // Empty strings or it's equivalents
  // should not be converted to 0's
  if (s === "" || s === "-") {
    return "";
  }

  // Try to cast it to a number
  if ((key = +s) === key) {
    return key;
  }

  // Try to make it a common string
  for (key in common_strings) {
    if (s === key) {
      return common_strings[key];
    }
  }

  // Give up
  return s;
}

module.exports = autocast;
